+++
title = "GSoC 2025 Chromium"
date = "2025-09-13"
description = "Blog showcasing work done through the Google Summer of Code 2025 @ Chromium by Hamed Elgizery"
url = "blog/gsoc-2025-chromium"
+++

### Introduction
During the summer of 2025, I worked as a contributor to the Chromium organization during my participation in Google Summer of Code (GSoC). More specifically, I was on the ChromiumOS side, where I worked on supporting Google's Hammer detachable keyboard. In particular, I focused on integrating its firmware update mechanisms into FWUPD, as one of Google’s shifts towards supporting open source and relying on an open source unified device firmware updater for Google’s devices.


### Project Description
The project's main target is to support firmware updating using a fwupd plugin to manage and handle the firmware update, for the Hammer detachable keyboard. Currently, the firmware updates are handled using the hammered, a hammer firmware updater daemon. During this project the foundations of supporting Hammer updates were added to a pre-existing fwupd plugin, namely “cros-ec”. The common here between Hammer and cros-ec, is that hammer is essentially the base of the detachable, which is base ec running the ec codebase. So it is a good common ground, with modifications required. Besides the EC, hammer is connected to a touchpad through an i2c connection, which runs its own firmware, and this is the second part of the support required.

Why all this?
This is part of a longer term goal, that is to be able to completely / partially migrate to fwupd for firmware updates, not only for Hammer, but for other devices as well. This step has several reasons, listing a few:
- Utility Compatibility: some vendors ship only Windows compatible utilities, which is problematic given the ChromiumOS Linux core.
- Scalability: as the number of hardware devices increases, and the different designs they are released with, the number of utility duplications increases, causing unnecessary overhead on the root file system space, in addition to more maintenance overhead.
- Maintenance: in many cases, vendors ship utilities that are built only for ChromeOS, and then they are rarely updated.


### What have been accomplished?

### CLs / PRs
#### Fwupd PRs:
##### Merged:
- [trivial: allow multiple DEVICE-ID to get-updates command](https://github.com/fwupd/fwupd/pull/8837): 
- [Incorporate ANOTHER\_WRITE\_REQUIRED flag within fu\_device\_list\_replace](https://github.com/fwupd/fwupd/pull/9068): 
- [Preparing the ec-cros plugin for subclassing](https://github.com/HamedElgizery/fwupd/pull/3)
- TODO: Add the following extra PRs 
- [Add unit test for Hammer](https://github.com/HamedElgizery/fwupd/pull/4): 
- ~~[Add hammer ec/touchpad support](https://github.com/HamedElgizery/fwupd/pull/2)~~: adds support for Hammer EC & Touchpad by adding extra feature to the pre-existing flow. Later scraped off to subclass the CrosEcUsbDevice further and override as needed, maintaining backwared compatibility.

#### ChromiumOS CLs:
- [touch\_updater: Update touch firmware report docs report\_updater\_version](https://chromium-review.googlesource.com/c/chromiumos/platform/touch_updater/+/6580172)
- [touch\_updater: Add report\_tool\_version to chromeos-touch-common.sh](https://chromium-review.googlesource.com/c/chromiumos/platform/touch_updater/+/6375383)
- [Fix typo in platform/firmware README.md file](https://chromium-review.googlesource.com/c/chromiumos/platform/firmware/+/6438831)

#### Chromium CL:
- [[PWA] Add web\_app\_database\_serialization.h/cc](https://chromium-review.googlesource.com/c/chromium/src/+/6304941):


### Future Work?
There is always more to be done. As of now, the foundations for supporting hammers are being set in place, supporting the USB Hammer device. But there are also the i2c Hammer devices that can be supported in the future. The support of hammer is now being worked on to be shipped soon, but after enough confidence of all the details of the plugin, there will be the next step of making use of it with the ChromiumOS, setting it up so that it runs as part of the on boot jobs, to ensure Hammer is up to date. Currently not supported given that the firmware files need to be installed manually, unlike fwupd. A similar flow is already being used with ChromiumOS to manage SSD firmware updates with Fwupd.

### Experience & Acquired Skills
It has been quite a summer. First, working on low-level projects wasn’t something that I had much experience in, so it was a fruitful stretch of my comfort zone. I have learned about how the Kernel interacts with devices, got into some of the firmware formats, e.g. the FMAP format. I had to learn a lot about fwupd on the go, going through a large codebase, exploring/patching core of Fwupd, to fulfill the plugin needs. Got to learn GLib & GObject which Fwupd heavily relies on, psst these are pretty cool :) I got to work on a real physical device whAlso, even before the GSoC has started I have learned a lot from going through the Chromium repository, doing some relatively simpler contributions, where I got to learn about Proto files. Overall, I have learned a lot, and for me that is worth much.

### Thanks Acknowledgements
I would like to thank my mentors, Henry Barnor and Jingyuan Liang, for their continuous support and guidance throughout this project. Their feedback and insights during our weekly sync-ups were invaluable in keeping me on track. In addition, Jingyuan’s help with testing through many iterations was instrumental in moving the work forward. I deeply appreciate the time and effort they both dedicated to mentoring me.
